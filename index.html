<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css">
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <link rel="stylesheet" href="css/main.css">
    <script src="js/main.js"></script>
    <title>Boolzapp</title>
</head>
<body>
    <!-- @click="contextMenuChatRemove" -->
    <div @click="contextMenuChatRemove(activeMessage)" id="app">
        <div class="up"></div>
        <div class="container">
            <div class="sideLeft">
                <div class="navInside">
                    <div class="navInside_left">
                        <img src="img/1.png" alt="">
                    </div>
                    <div class="navInside_right">
                        <i class="fas fa-circle-notch"></i>
                        <i class="fas fa-comment-alt"></i>
                        <i class="fas fa-ellipsis-v"></i>
                    </div>
                </div>
                <div class="notify">
                    <i class="fas fa-bell-slash" @click=(log())></i>
                    <div>
                        <span>Ricevi notifiche di nuovi messaggi</span>
                        <span>Attiva notifiche desktop <i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="search">
                    <div class="search_input" >
                        <i class="fas fa-search"></i>
                        <input type="text" name="" id="" placeholder="Cerca o inizia una nuova chat" v-model="search">
                    </div>    
                </div>
                <div v-if="" class="chatList">
                    <div 
                    v-if="elem.name.toLowerCase().includes(search.toLowerCase()) " 
                    v-for="(elem,index) in contacts" 
                    class="chatUtent" 
                    @click="insertHeaderRight(index)">
                        <div class="chatUtent_img" >
                            <img class="circleImg" :src="elem.avatar" >
                        </div>
                        <div class="chatUtent-prevue">
                            <span class="name">{{elem.name}}</span>
                            <span>{{elem.messages[0].text.substring(0,15)}}<span v-if="elem.messages[0].text.length>15">...</span></span>
                        </div>
                        <div class="chatUtent-features">
                            <span>{{elem.messages[0].date.substring(11,16)}}</span>
                            <span><i v-if="sound" class="fas fa-volume-mute"></i></span>
                        </div>
                    </div>
                    <!-- v-if=(prova==contacts.length)
                    <div v-else>{{prova= prova + 1}}</div> -->
                </div>
            </div>
            <div v-if="activeChat>=0" class="sideRight">
                <div class="navInside">
                    <div class="navInside_left">
                        <img :src="contacts[activeChat].avatar" class="circleImg">                 
                        <span>{{ contacts[activeChat].name }}</span>
                    </div>
                    <div class="navInside_right">
                        <i class="fas fa-search"></i>
                        <i class="fas fa-ellipsis-v"></i>
                    </div>
                </div>
                <div class="mainChat"  >
                     <!-- v-bind:class="{{{elem.status}}=='received'?[recive]:[sent]}" -->
                     <div class="contextMenu-css" v-if="contacts[activeChat].messages[activeMessage].contextMenu">
                      <ul>
                          <li>Message info</li>
                          <li @click="delateMessage(index)"> Delate Message</li>
                      </ul>
                     </div>
                     <span  
                     @click.right="addBooleanOnContact(index)"
                     :class="elem.status" 
                     v-for="(elem,index) in contacts[activeChat].messages"
                     class="chat">
                        <span class="chat_text">
                            <i class="fas fa-caret-down"></i>
                            {{elem.text}} 
                        </span>
                        <span class="chatData">{{elem.date.substring(elem.date.length-8,elem.date.length-3)}}
                            <i class="fas fa-check"></i>
                        </span>

                    </span> 
                    <span v-else :class="sent">ciao</span>
                </div>
                <div class="textChat">
                    <i class="fas fa-grin"></i>
                    <i class="fas fa-paperclip"></i>
                    <input v-model="newMessage" type="text" v-on:keyUp.enter="addMessages(newMessage,'sent'),delayMessages('ok',newMessage)"
                    placeholder="Scrivi un messaggio">
                    <i class="fas fa-paper-plane" @click="addMessages(newMessage,'sent'),delayMessages"></i>
    
                </div>
            </div>
            <div v-else class="sfondo">
                <img src="img/123.png" >
                <span class="title">Mantiene il telefono connesso</span>
                <span>WhatsApp si collega al tuo telefono per sincronizzare i messaggi. Per ridurre l'utilizzo dei dati, collega il telefono al Wi-Fi.</span>
                <div><i class="fas fa-desktop"></i>
                Whatsapp Ã¨ disponibile per Windows. 
                <a href="">
                    Scaricala qui  
                </a>
            </div>
            </div>
        </div>

    </div>
</body>
</html>